function _defineProperties(e,s){for(var t=0;t<s.length;t++){var i=s[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),e}!function(){"use strict";var e={};function s(e){return"string"!=typeof e&&"number"!=typeof e?"":(""+e).toLowerCase().replace(/[^a-z0-9]+/g,"")}e.toID=s;var t={hp:"HP",atk:"Atk",def:"Def",spa:"SpA",spd:"SpD",spe:"Spe"},i=Object.keys(t),n={HP:"hp",hp:"hp",Attack:"atk",Atk:"atk",atk:"atk",Defense:"def",Def:"def",def:"def","Special Attack":"spa",SpA:"spa",SAtk:"spa",SpAtk:"spa",spa:"spa",Special:"spa",spc:"spa",Spc:"spa","Special Defense":"spd",SpD:"spd",SDef:"spd",SpDef:"spd",spd:"spd",Speed:"spe",Spe:"spe",Spd:"spe",spe:"spe"};e.Sets=new(function(){function s(){}var n=s.prototype;return n.pack=function(s){return e.Sets.packSet(s)},n.packSet=function(e){var s="";s+=e.name||e.species;var t=f(e.species);s+="|"+(f(e.name||e.species)===t?"":t),s+="|"+f(e.item),s+="|"+(f(e.ability)||"-");var i="";if(s+="|",e.moves)for(var n=0;n<e.moves.length;n++){var r=f(e.moves[n]);n&&!r||(s+=(n?",":"")+r,"HiddenPower"===r.substr(0,11)&&r.length>11&&(i=r.slice(11)))}s+="|"+(e.nature||"");var a="|";e.evs&&(a="|"+(e.evs.hp||"")+","+(e.evs.atk||"")+","+(e.evs.def||"")+","+(e.evs.spa||"")+","+(e.evs.spd||"")+","+(e.evs.spe||"")),s+="|,,,,,"===a?"|":a,e.gender?s+="|"+e.gender:s+="|";var u=function(s){return 31===e.ivs[s]||void 0===e.ivs[s]?"":e.ivs[s].toString()},p="|";return e.ivs&&(p="|"+u("hp")+","+u("atk")+","+u("def")+","+u("spa")+","+u("spd")+","+u("spe")),s+="|,,,,,"===p?"|":p,e.shiny?s+="|S":s+="|",e.level&&100!==e.level?s+="|"+e.level:s+="|",void 0!==e.happiness&&255!==e.happiness?s+="|"+e.happiness:s+="|",(e.pokeball||e.hpType&&f(e.hpType)!==i||e.gigantamax)&&(s+=","+(e.hpType||""),s+=","+f(e.pokeball||""),s+=","+(e.gigantamax?"G":"")),s},n.exportSet=function(e,s){var n,r,a,u,p,f,l,d="",c=e.species||e.name;(c=(null===(n=null==s?void 0:s.species.get(c))||void 0===n?void 0:n.name)||c,e.name&&e.name!==c?d+=e.name+" ("+c+")":d+=""+c,(!s||s.gen>=2)&&("M"===e.gender&&(d+=" (M)"),"F"===e.gender&&(d+=" (F)")),e.item)&&(d+=" @ "+(null!==(a=null===(r=null==s?void 0:s.items.get(e.item))||void 0===r?void 0:r.name)&&void 0!==a?a:e.item));(d+="  \n",e.ability&&(!s||(null==s?void 0:s.gen)>=3))&&(d+="Ability: "+(null!==(p=null===(u=null==s?void 0:s.abilities.get(e.ability))||void 0===u?void 0:u.name)&&void 0!==p?p:e.ability)+"  \n");e.level&&100!==e.level&&(d+="Level: "+e.level+"  \n"),e.shiny&&(!s||s.gen>=2)&&(d+="Shiny: Yes  \n"),"number"!=typeof e.happiness||255===e.happiness||isNaN(e.happiness)||s&&!(s.gen>=2)||(d+="Happiness: "+e.happiness+"  \n"),e.pokeball&&(d+="Pokeball: "+e.pokeball+"  \n"),e.hpType&&(d+="Hidden Power: "+e.hpType+"  \n"),e.gigantamax&&(d+="Gigantamax: Yes  \n");var g=!0;if(e.evs&&(!s||s.gen>=3))for(var b=0;b<i.length;b++){var h=i[b];e.evs[h]&&(g?(d+="EVs: ",g=!1):d+=" / ",d+=e.evs[h]+" "+t[h])}if(g||(d+="  \n"),e.nature&&(!s||s.gen>=3)&&(d+=e.nature+" Nature  \n"),g=!0,e.ivs){var k=!0,S=void 0;if(e.moves)for(var x=0,y=e.moves;x<y.length;x++){if(S=v(y[x])){var T=m(S,s);if(!T)continue;for(var O=0;O<i.length;O++){var N=i[O];if((void 0===e.ivs[N]?31:e.ivs[N])!==(T[N]||31)){k=!1;break}}}}if(k&&!S)for(var w=0;w<i.length;w++){var P=i[w];if(31!==e.ivs[P]&&void 0!==e.ivs[P]){k=!1;break}}if(!k)for(var A=0;A<i.length;A++){var j=i[A];void 0===e.ivs[j]||isNaN(e.ivs[j])||31===e.ivs[j]||(g?(d+="IVs: ",g=!1):d+=" / ",d+=e.ivs[j]+" "+t[j])}}if(g||(d+="  \n"),e.moves)for(var H=0,I=e.moves;H<I.length;H++){var D=I[H];D&&(d+="- "+o(D=null!==(l=null===(f=null==s?void 0:s.moves.get(D))||void 0===f?void 0:f.name)&&void 0!==l?l:D)+"  \n")}return d+="\n"},n.unpack=function(s,t){return e.Sets.unpackSet(s,t)},n.unpackSet=function(e,s){return a(e,0,0,s).set},n.importSet=function(e,s){return p(e.split("\n"),0,s).set},n.toJSON=function(e){return JSON.stringify(e)},n.fromJSON=function(e){if(e.startsWith("{")&&e.endsWith("}"))return JSON.parse(e)},n.toString=function(s,t){return e.Sets.exportSet(s,t)},n.fromString=function(s){return e.Sets.importSet(s)},s}());var r=["","0","1","H","S"];function a(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,n={};if((t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.name=e.substring(s,t),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.species=l(e.substring(s,t),null==i?void 0:i.species)||n.name,s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.item=l(e.substring(s,t),null==i?void 0:i.items),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};var a,u=l(e.substring(s,t),null==i?void 0:i.abilities);if("-"===u)u="";else if(r.includes(u)){if(i){var p=i.species.get(n.species);"Zygarde"===(null==p?void 0:p.baseSpecies)&&"H"===u?u="Power Construct":(null==p?void 0:p.abilities)&&(u=p.abilities[u||"0"])}if(""!==u&&!u)return{i:s,j:t}}if(n.ability=u,s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.moves=e.substring(s,t).split(",",24).filter((function(e){return e})).map((function(e){return l(e,null==i?void 0:i.moves)})),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.nature=l(e.substring(s,t),null==i?void 0:i.natures),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.evs={hp:0,atk:0,def:0,spa:0,spd:0,spe:0},t!==s){var v=e.substring(s,t);if(v.length>5){var o=v.split(",");n.evs.hp=Number(o[0])||n.evs.hp,n.evs.atk=Number(o[1])||n.evs.atk,n.evs.def=Number(o[2])||n.evs.def,n.evs.spa=Number(o[3])||n.evs.spa,n.evs.spd=Number(o[4])||n.evs.spd,n.evs.spe=Number(o[5])||n.evs.spe}}if(s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(s!==t&&(n.gender=e.substring(s,t)),s=t+1,(t=e.indexOf("|",s))<0)return{i:s,j:t};if(n.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31},t!==s){var f=e.substring(s,t).split(",",6);n.ivs.hp=""===f[0]?31:Number(f[0])||0,n.ivs.atk=""===f[1]?31:Number(f[1])||0,n.ivs.def=""===f[2]?31:Number(f[2])||0,n.ivs.spa=""===f[3]?31:Number(f[3])||0,n.ivs.spd=""===f[4]?31:Number(f[4])||0,n.ivs.spe=""===f[5]?31:Number(f[5])||0}return s=t+1,(t=e.indexOf("|",s))<0?{i:s,j:t}:(s!==t&&(n.shiny=!0),s=t+1,(t=e.indexOf("|",s))<0?{i:s,j:t}:(s!==t&&(n.level=parseInt(e.substring(s,t))),s=t+1,(t=e.indexOf("]",s))<0?s<e.length&&(a=e.substring(s).split(",",4)):s!==t&&(a=e.substring(s,t).split(",",4)),a&&(n.happiness=a[0]?Number(a[0]):255,n.hpType=a[1]||"",n.pokeball=l(a[2]||"",null==i?void 0:i.items),n.gigantamax=!!a[3]),{set:n,i:s,j:t}))}e._unpack=a;var u=/^[A-Za-z]+ (N|n)ature/;function p(e){for(var t,i,r,a,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,f=void 0;p<e.length;p++){var l=e[p].trim();if(""===l||"---"===l||"==="===l.substr(0,3)||l.includes("|"))return{set:f,line:p};if(f){if("Trait: "===l.substr(0,7))l=l.substr(7),f.ability=l;else if("Ability: "===l.substr(0,9))l=l.substr(9),f.ability=l;else if("Shiny: Yes"===l)f.shiny=!0;else if("Level: "===l.substr(0,7))l=l.substr(7),f.level=+l;else if("Happiness: "===l.substr(0,11))l=l.substr(11),f.happiness=+l;else if("Pokeball: "===l.substr(0,10))l=l.substr(10),f.pokeball=l;else if("Hidden Power: "===l.substr(0,14))l=l.substr(14),f.hpType=l;else if("Gigantamax: Yes"===l)f.gigantamax=!0;else if("EVs: "===l.substr(0,5)){var d=(l=l.substr(5)).split(" / ");f.evs={hp:0,atk:0,def:0,spa:0,spd:0,spe:0};for(var c=0;c<d.length;c++){var g=d[c],b=g.indexOf(" ");if(-1!==b){var h=n[g.substr(b+1)],k=parseInt(g.substr(0,b));h&&(f.evs[h]=k)}}}else if("IVs: "===l.substr(0,5)){var S=(l=l.substr(5)).split(" / ");f.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};for(var x=0;x<S.length;x++){var y=S[x],T=y.indexOf(" ");if(-1!==T){var O=n[y.substr(T+1)],N=parseInt(y.substr(0,T));O&&(isNaN(N)&&(N=31),f.ivs[O]=N)}}}else if(u.exec(l)){var w=l.indexOf(" Nature");-1===w&&(w=l.indexOf(" nature")),"undefined"!==(l=l.substr(0,w))&&(f.nature=l)}else if("-"===l.substr(0,1)||"~"===l.substr(0,1)){" "===(l=l.substr(1)).substr(0,1)&&(l=l.substr(1)),f.moves||(f.moves=[]);var P=v(l);if(P){l="Hidden Power "+P.toString();var A=m(P,o);if(!f.ivs&&A){f.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};var j=void 0;for(j in A)f.ivs[j]=A[j]}}"Frustration"===l&&void 0===f.happiness&&(f.happiness=0),f.moves.push(l)}}else{f={name:"",species:"",gender:""};var H=l.lastIndexOf(" @ ");-1!==H&&(f.item=l.substr(H+3),"noitem"===s(f.item)&&(f.item=""),l=l.substr(0,H))," (M)"===l.substr(l.length-4)&&(f.gender="M",l=l.substr(0,l.length-4))," (F)"===l.substr(l.length-4)&&(f.gender="F",l=l.substr(0,l.length-4));var I=l.lastIndexOf(" (");if(")"===l.substr(l.length-1)&&-1!==I){var D=(l=l.substr(0,l.length-1)).substr(I+2);f.species=null!==(i=null===(t=null==o?void 0:o.species.get(D))||void 0===t?void 0:t.name)&&void 0!==i?i:D,l=l.substr(0,I),f.name=l}else f.species=null!==(a=null===(r=null==o?void 0:o.species.get(l))||void 0===r?void 0:r.name)&&void 0!==a?a:l,f.name=""}}return{set:f,line:p+1}}function v(e){return"Hidden Power ["===e.substr(0,14)?e.substr(14,e.length-15):"Hidden Power "===e.substr(0,13)?e.substr(13):"hiddenpower"===e.substr(0,11)?e.substr(11,1).toUpperCase()+e.substr(12):void 0}function o(e){return"Hidden Power ["===e.substr(0,14)?e:"Hidden Power "===e.substr(0,13)?e.substr(0,13)+"["+e.substr(13)+"]":"hiddenpower"===e.substr(0,11)?"Hidden Power ["+e.substr(11,1).toUpperCase()+e.substr(12)+"]":e}function f(e){return e?e.replace(/[^A-Za-z0-9]+/g,""):""}function l(e,s){if(!e)return"";if(s){var t=s.get(e);if(null==t?void 0:t.exists)return t.name}return e.replace(/([0-9]+)/g," $1 ").replace(/([A-Z])/g," $1").replace(/[ ][ ]/g," ").trim()}e._import=p;var d={Bug:{ivs:{atk:30,def:30,spd:30},dvs:{atk:13,def:13}},Dark:{ivs:{},dvs:{}},Dragon:{ivs:{atk:30},dvs:{def:14}},Electric:{ivs:{spa:30},dvs:{atk:14}},Fighting:{ivs:{def:30,spa:30,spd:30,spe:30},dvs:{atk:12,def:12}},Fire:{ivs:{atk:30,spa:30,spe:30},dvs:{atk:14,def:12}},Flying:{ivs:{hp:30,atk:30,def:30,spa:30,spd:30},dvs:{atk:12,def:13}},Ghost:{ivs:{def:30,spd:30},dvs:{atk:13,def:14}},Grass:{ivs:{atk:30,spa:30},dvs:{atk:14,def:14}},Ground:{ivs:{spa:30,spd:30},dvs:{atk:12}},Ice:{ivs:{atk:30,def:30},dvs:{def:13}},Poison:{ivs:{def:30,spa:30,spd:30},dvs:{atk:12,def:14}},Psychic:{ivs:{atk:30,spe:30},dvs:{def:12}},Rock:{ivs:{def:30,spd:30,spe:30},dvs:{atk:13,def:12}},Steel:{ivs:{spd:30},dvs:{atk:13}},Water:{ivs:{atk:30,def:30,spa:30},dvs:{atk:14,def:13}}};function m(e,s){var t=d[e];if(t)return 2===(null==s?void 0:s.gen)?function(e){var s,t={};for(s in e)t[s]=2*e[s];return t}(t.dvs):t.ivs}var c=e,g=function(){function s(e,s,t,i,n){this.team=e,this.data=s,this.format=t,this.name=i,this.folder=n,this.team=e,this.format=t,this.name=i,this.folder=n,this.data=s,t&&s&&s.forGen&&("gen"===t.slice(0,3)?this.data=s.forGen(parseInt(t[3])):(this.format="gen6"+t,this.data=s.forGen(6)))}var t=s.prototype;return t.pack=function(){return e.Teams.packTeam(this)},s.unpack=function(s,t){return e.Teams.unpackTeam(s,t)},t.export=function(e){for(var s="",t=0,i=this.team;t<i.length;t++){var n=i[t];s+=c.Sets.exportSet(n,e||this.data)}return s},s.import=function(s,t){return e.Teams.importTeam(s,t)},t.toString=function(e){return this.export(e)},s.fromString=function(s,t){return e.Teams.importTeam(s,t)},t.toJSON=function(){return JSON.stringify(this.team)},s.fromJSON=function(e){if("["===e.charAt(0)&&"]"===e.charAt(e.length-1))return new s(JSON.parse(e))},_createClass(s,[{key:"gen",get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.gen}}]),s}();function b(s,t){var i=s.indexOf("|");if(!(i<0)){var n=s.indexOf("]");n>i&&(n=-1);var r=s.lastIndexOf("/",i);r<0&&(r=n);var a=n>0?s.slice(0,n):"gen"+((null==t?void 0:t.gen)||8),u=e.Teams.unpackTeam(s.slice(i+1),t);return u?new g(u.team,t,a,s.slice(r+1,i),s.slice(n+1,r>0?r:n+1)):u}}e.Team=g,e.Teams=new(function(){function s(){}var t=s.prototype;return t.packTeam=function(e){for(var s="",t=0,i=e.team;t<i.length;t++){var n=i[t];s&&(s+="]"),s+=c.Sets.packSet(n)}return s},t.unpackTeam=function(e,s){if(e){if("["===e.charAt(0)&&"]"===e.charAt(e.length-1))return g.fromJSON(e);for(var t=[],i=0,n=0,r=0;r<24;r++){var a=c._unpack(e,i,n,s);if(!a.set)return;if(t.push(a.set),i=a.i,(n=a.j)<0)break;i=n+1}return new g(t,s)}},t.importTeam=function(s,t){var i=e.Teams.importTeams(s,t,!0);return i.length?i[0]:void 0},t.importTeams=function(s,t,i){var n=s.split("\n");if(1===n.length||2===n.length&&!n[1]){var r=e.Teams.unpackTeam(n[0],t);return r?[r]:[]}for(var a=[],u=-1,p=[],v=0;v<n.length;v++){var o=n[v].trim();if("==="===o.substr(0,3)){if(i&&a.length)return a;p=[],o=o.substr(3,o.length-6).trim();var f="gen"+((null==t?void 0:t.gen)||8),l=o.indexOf("]");l>=0&&(f=o.substr(1,l-1),o=o.substr(l+1).trim());var d=o.lastIndexOf("/"),m="";d>0&&(m=o.slice(0,d),o=o.slice(d+1)),a.push(new g(p,t,f,o,m))}else if(o.includes("|")){var h=b(o,t);h&&a.push(h)}else if(u!==v){var k=c._import(n,v,t);if(k.set&&p.push(k.set),k.line===v)continue;v=(u=k.line)-1}}return p.length&&!a.length&&a.push(new g(p,t)),a},t.exportTeams=function(e,s){for(var t="",i=0,n=0;n<e.length;n++){var r=e[n];t+="=== "+(r.format?"["+r.format.toString()+"] ":"")+(r.folder?r.folder+"/":"")+(r.name||"Untitled "+ ++i)+" ===\n\n",t+=r.export(s),t+="\n"}return t},t.toString=function(s,t){return e.Teams.exportTeams(s,t)},t.fromString=function(s,t){return e.Teams.importTeams(s,t)},s}()),window.PokemonSets=e.Sets,window.PokemonTeams=e.Teams}();